!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){(function(e){var n;t.exports=function t(e,r,o){function i(a,c){if(!r[a]){if(!e[a]){if(!c&&"function"==typeof n&&n)return n(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};e[a][0].call(l.exports,(function(t){return i(e[a][1][t]||t)}),l,l.exports,t,e,r,o)}return r[a].exports}for(var s="function"==typeof n&&n,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){"use strict";var r=t("./raw"),o=[],i=[],s=r.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function a(t){var e;(e=o.length?o.pop():new c).task=t,r(e)}function c(){this.task=null}e.exports=a,c.prototype.call=function(){try{this.task.call()}catch(t){a.onerror?a.onerror(t):(i.push(t),s())}finally{this.task=null,o[o.length]=this}}},{"./raw":2}],2:[function(t,n,r){(function(t){"use strict";function e(t){o.length||r(),o[o.length]=t}n.exports=e;var r,o=[],i=0,s=1024;function a(){for(;i<o.length;){var t=i;if(i+=1,o[t].call(),i>s){for(var e=0,n=o.length-i;e<n;e++)o[e]=o[e+i];o.length-=i,i=0}}o.length=0,i=0}var c,u,l,h=void 0!==t?t:self,f=h.MutationObserver||h.WebKitMutationObserver;function p(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof f?(c=1,u=new f(a),l=document.createTextNode(""),u.observe(l,{characterData:!0}),r=function(){c=-c,l.data=c}):r=p(a),e.requestFlush=r,e.makeRequestCallFromTimer=p}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){"use strict";var r=t("es5-ext/object/assign"),o=t("es5-ext/object/normalize-options"),i=t("es5-ext/object/is-callable"),s=t("es5-ext/string/#/contains");(e.exports=function(t,e){var n,i,a,c,u;return arguments.length<2||"string"!=typeof t?(c=e,e=t,t=null):c=arguments[2],null==t?(n=a=!0,i=!1):(n=s.call(t,"c"),i=s.call(t,"e"),a=s.call(t,"w")),u={value:e,configurable:n,enumerable:i,writable:a},c?r(o(c),u):u}).gs=function(t,e,n){var a,c,u,l;return"string"!=typeof t?(u=n,n=e,e=t,t=null):u=arguments[3],null==e?e=void 0:i(e)?null==n?n=void 0:i(n)||(u=n,n=void 0):(u=e,e=n=void 0),null==t?(a=!0,c=!1):(a=s.call(t,"c"),c=s.call(t,"e")),l={get:e,set:n,configurable:a,enumerable:c},u?r(o(u),l):l}},{"es5-ext/object/assign":5,"es5-ext/object/is-callable":8,"es5-ext/object/normalize-options":14,"es5-ext/string/#/contains":17}],4:[function(t,e,n){"use strict";e.exports=function(){}},{}],5:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":6,"./shim":7}],6:[function(t,e,n){"use strict";e.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],7:[function(t,e,n){"use strict";var r=t("../keys"),o=t("../valid-value"),i=Math.max;e.exports=function(t,e){var n,s,a,c=i(arguments.length,2);for(t=Object(o(t)),a=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},s=1;s<c;++s)e=arguments[s],r(e).forEach(a);if(void 0!==n)throw n;return t}},{"../keys":11,"../valid-value":16}],8:[function(t,e,n){"use strict";e.exports=function(t){return"function"==typeof t}},{}],9:[function(t,e,n){"use strict";var r=t("./valid-value"),o=Object.prototype.propertyIsEnumerable;e.exports=function(t){var e;for(e in r(t),t)if(o.call(t,e))return!1;return!0}},{"./valid-value":16}],10:[function(t,e,n){"use strict";var r=t("../function/noop")();e.exports=function(t){return t!==r&&null!==t}},{"../function/noop":4}],11:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":12,"./shim":13}],12:[function(t,e,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],13:[function(t,e,n){"use strict";var r=t("../is-value"),o=Object.keys;e.exports=function(t){return o(r(t)?Object(t):t)}},{"../is-value":10}],14:[function(t,e,n){"use strict";var r=t("./is-value"),o=Array.prototype.forEach,i=Object.create,s=function(t,e){var n;for(n in t)e[n]=t[n]};e.exports=function(t){var e=i(null);return o.call(arguments,(function(t){r(t)&&s(Object(t),e)})),e}},{"./is-value":10}],15:[function(t,e,n){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],16:[function(t,e,n){"use strict";var r=t("./is-value");e.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},{"./is-value":10}],17:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":18,"./shim":19}],18:[function(t,e,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},{}],19:[function(t,e,n){"use strict";var r=String.prototype.indexOf;e.exports=function(t){return r.call(this,t,arguments[1])>-1}},{}],20:[function(t,e,n){n.Agent=t("./lib/Agent"),n.ServiceManager=t("./lib/ServiceManager"),n.TransportManager=t("./lib/TransportManager"),n.transport={LocalTransport:t("./lib/transport/local/LocalTransport")},n.TransportManager.registerType(n.transport.LocalTransport),n.system=new n.ServiceManager,n.system.transports.add(new n.transport.LocalTransport),n.Agent.getTransportById=function(t){return n.system.transports.get(t)}},{"./lib/Agent":21,"./lib/ServiceManager":22,"./lib/TransportManager":23,"./lib/transport/local/LocalTransport":27}],21:[function(t,e,n){"use strict";var r=t("promise"),o=t("uuid-v4"),i=(t("./util"),t("url"));function s(t){this.id=t?t.toString():o(),this.connections=[],this.defaultConnection=null,this.ready=r.resolve([])}function a(t){var e=s.modules[t];if(!e)throw new Error('Unknown module "'+t+'". Choose from: '+Object.keys(s.modules).map(JSON.stringify).join(", "));return e}s.modules={},s.registerModule=function(t){var e=t.prototype.type;if("function"!=typeof t)throw new Error("Constructor function expected");if(!e)throw new Error('Field "prototype.type" missing in transport constructor');if(e in s.modules&&s.modules[e]!==t)throw new Error('Module of type "'+e+'" already exists');s.modules[e]=t},s.getTransportById=function(t){throw new Error('Transport with id "'+t+'" not found')},s.prototype.extend=function(t,e){if(Array.isArray(t)){var n=[].concat(t);n.sort((function(t,e){return"pattern"==t?-1:"pattern"==e?1:0}));for(var r=0;r<n.length;r++)this.extend(n[r],e)}else{var o=new(a(t))(this,e).mixin(),i=this;Object.keys(o).forEach((function(t){if(void 0!==i[t]&&"_receive"!==t)throw new Error('Conflict: agent already has a property "'+prop+'"')})),Object.keys(o).forEach((function(t){i[t]=o[t]}))}return this},s.prototype.loadModule=function(t,e,n){(void 0!==e?Object.create(e):{}).extend=!1;var r=new(a(t))(this,e,n),o=r.mixin();return this._receive=o._receive,r},s.prototype.send=function(t,e){if(-1!==t.indexOf(":")){var n=i.parse(t);return this._sendByProtocol(n.protocol.slice(0,-1),t,e)}var o=t.indexOf("@");if(-1!=o){var s=t.substring(0,o),a=t.substring(o+1);return this._sendByTransportId(a,s,e)}var c=this.defaultConnection;return c?c.send(t,e):r.reject(new Error("No transport found"))},s.prototype._sendByNetworkId=function(t,e,n){for(var o=0;o<this.connections.length;o++){var i=this.connections[o];if(i.transport.networkId==t)return i.send(e,n)}return r.reject(new Error('No transport found with networkId "'+t+'"'))},s.prototype._sendByProtocol=function(t,e,n){t="https"==t?"http":t;for(var o=0;o<this.connections.length;o++){var i=this.connections[o];if(i.transport.type==t)return i.send(e,n)}return r.reject(new Error('No transport found for protocol "'+t+'"'))},s.prototype._sendByTransportId=function(t,e,n){for(var o=0;o<this.connections.length;o++){var i=this.connections[o];if(i.transport.id==t)return i.send(e,n)}return r.reject(new Error('No transport found with id "'+t+'"'))},s.prototype.receive=function(t,e,n){},s.prototype._receive=function(t,e,n){return this.receive(t,e)},s.prototype.getUrls=function(){return this.connections.map((function(t){return t.getMyUrl()}))},s.prototype.getUrlByProtocol=function(t){for(var e=0;e<this.connections.length;e++){var n=this.connections[e];if(n.transport.type==t)return n.getMyUrl()}},s.prototype.connect=function(t,e){if(Array.isArray(t)){var n=this;return t.map((function(t){try{return n._connect(t,e)}catch(t){return{error:t}}}))}if("string"==typeof t)try{return this._connect(s.getTransportById(t),e)}catch(t){return{error:t}}else try{return this._connect(t,e)}catch(t){return{error:t}}},s.prototype._connect=function(t,e){var n=this,r=t.connect(e||this.id,(function(t,e,r){return n._receive(t,e,r)}));if(this.connections.push(r),this.defaultConnection){if(t.default){if(this.defaultConnection.default)throw new Error("Cannot connect to a second default transport");this.defaultConnection=r}}else this.defaultConnection=r;return this._updateReady(),r},s.prototype.disconnect=function(t){var e,n;if(t){if(Array.isArray(t))for(e=0;e<this.connections.length;)n=this.connections[e],-1!==t.indexOf(n.transport)?this._disconnect(n):e++;else if("string"==typeof t)this.disconnect(s.getTransportById(t));else for(e=0;e<this.connections.length;e++)if((n=this.connections[e]).transport===t){this._disconnect(n);break}}else for(;n=this.connections[0];)this._disconnect(n)},s.prototype._disconnect=function(t){var e=this.connections.indexOf(t);-1!==e&&(t.close(),this.connections.splice(e,1),this.defaultConnection===t&&(this.defaultConnection=this.connections[this.connections.length-1]||null)),this._updateReady()},s.prototype._updateReady=function(){this.ready=r.all(this.connections.map((function(t){return t.ready})))},e.exports=s},{"./util":28,promise:52,url:68,"uuid-v4":61}],22:[function(t,e,n){"use strict";var r=t("seed-random"),o=t("hypertimer"),i=t("./TransportManager"),s={transports:!0,timer:!0,random:!0};function a(t){this.transports=new i,this.timer=o(),this.random=Math.random,this.init(t)}a.prototype.init=function(t){if(this.transports.clear(),t){if(t.transports&&this.transports.load(t.transports),t.timer&&this.timer.config(t.timer),t.random)if(t.random.deterministic){var e=t.random.seed||"random seed";this.random=r(e,t.random)}else this.random=Math.random;for(var n in t)t.hasOwnProperty(n)&&!s[n]&&console.log('WARNING: Unknown configuration option "'+n+'"')}},a.prototype.clear=function(){this.transports.clear()},e.exports=a},{"./TransportManager":23,hypertimer:31,"seed-random":60}],23:[function(t,e,n){"use strict";function r(t){this.transports=[],t&&this.load(t)}r.types={},r.registerType=function(t){var e=t.prototype.type;if("function"!=typeof t)throw new Error("Constructor function expected");if(!e)throw new Error('Field "prototype.type" missing in transport constructor');if(e in r.types&&r.types[e]!==t)throw new Error('Transport type "'+e+'" already exists');r.types[e]=t},r.prototype.add=function(t){return this.transports.push(t),t},r.prototype.load=function(t){if(Array.isArray(t))return t.map(this.load.bind(this));var e=t.type;if(!e)throw new Error('Property "type" missing');var n=r.types[e];if(!n)throw new Error('Unknown type of transport "'+e+'". Choose from: '+Object.keys(r.types).join(","));var o=new n(t);return this.transports.push(o),o},r.prototype.unload=function(t){var e;if("string"==typeof t)e=this.get(t);else if(Array.isArray(t))for(var n=0;n<t.length;n++)this.unload(t[n]);else e=t;if(e){e.close();var r=this.transports.indexOf(e);-1!==r&&this.transports.splice(r,1)}},r.prototype.get=function(t){for(var e=0;e<this.transports.length;e++){var n=this.transports[e];if(n.id===t)return n}throw new Error('Transport with id "'+t+'" not found')},r.prototype.getAll=function(){return this.transports.concat([])},r.prototype.getByType=function(t){if(t){if(!(t in r.types))throw new Error('Unknown type of transport "'+t+'". Choose from: '+Object.keys(r.types).join(","));return this.transports.filter((function(e){return e.type===t}))}return[].concat(this.transports)},r.prototype.clear=function(){this.transports.forEach((function(t){t.close()})),this.transports=[]},e.exports=r},{}],24:[function(t,e,n){"use strict";var r=t("promise");function o(t,e,n){throw new Error("Cannot create an abstract Connection")}o.prototype.ready=r.reject(new Error("Cannot get abstract property ready")),o.prototype.send=function(t,e){throw new Error("Cannot call abstract function send")},o.prototype.close=function(){throw new Error('Cannot call abstract function "close"')},o.prototype.getMyUrl=function(){return this.transport.type+":"+this.id},e.exports=o},{promise:52}],25:[function(t,e,n){"use strict";function r(t){this.id=t&&t.id||null,this.default=t&&t.default||!1}r.prototype.type=null,r.prototype.connect=function(t,e){throw new Error('Cannot invoke abstract function "connect"')},r.prototype.close=function(){throw new Error('Cannot invoke abstract function "close"')},e.exports=r},{}],26:[function(t,e,n){"use strict";var r=t("promise");function o(t,e,n){if(this.transport=t,this.id=e,this.id in this.transport.agents)throw new Error("Agent with id "+e+" already exists");this.transport.agents[this.id]=n,this.ready=r.resolve(this)}t("../Connection"),o.prototype.getMyUrl=function(){return this.transport.type+":"+this.id},o.prototype.send=function(t,e){var n=t.replace("local:","").split("?"),o=this.transport.agents[n[0]];if(!o)return r.reject(new Error("Agent with id "+t+" not found"));var i=n[1]?n[1].split("&"):[];return o("local:"+this.id,e,i),r.resolve()},o.prototype.close=function(){delete this.transport.agents[this.id]},e.exports=o},{"../Connection":24,promise:52}],27:[function(t,e,n){"use strict";var r=t("./../Transport"),o=t("./LocalConnection");function i(t){this.id=t&&t.id||null,this.networkId=this.id||null,this.default=t&&t.default||!1,this.agents={}}i.prototype=new r,i.prototype.type="local",i.prototype.connect=function(t,e){return new o(this,t,e)},i.prototype.close=function(){this.agents={}},e.exports=i},{"./../Transport":25,"./LocalConnection":26}],28:[function(t,e,n){"use strict";n.isPromise=function(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch},n.normalizeURL=function(t){return"/"==t[t.length-1]?t.substring(0,t.length-1):t}},{}],29:[function(t,e,n){"use strict";var r=t("es5-ext/object/is-empty"),o=t("es5-ext/object/valid-value"),i=Object.prototype.hasOwnProperty;e.exports=function(t){var e;return o(t),e=arguments[1],arguments.length>1?i.call(t,"__ee__")&&Boolean(t.__ee__[e]):t.hasOwnProperty("__ee__")&&!r(t.__ee__)}},{"es5-ext/object/is-empty":9,"es5-ext/object/valid-value":16}],30:[function(t,e,n){"use strict";var r,o,i,s,a,c,u,l=t("d"),h=t("es5-ext/object/valid-callable"),f=Function.prototype.apply,p=Function.prototype.call,d=Object.create,m=Object.defineProperty,y=Object.defineProperties,v=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};o=function(t,e){var n,o;return h(e),o=this,r.call(this,t,n=function(){i.call(o,t,n),f.call(e,this,arguments)}),n.__eeOnceListener__=e,this},a={on:r=function(t,e){var n;return h(e),v.call(this,"__ee__")?n=this.__ee__:(n=g.value=d(null),m(this,"__ee__",g),g.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:o,off:i=function(t,e){var n,r,o,i;if(h(e),!v.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(r=n[t]))for(i=0;o=r[i];++i)o!==e&&o.__eeOnceListener__!==e||(2===r.length?n[t]=r[i?0:1]:r.splice(i,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:s=function(t){var e,n,r,o,i;if(v.call(this,"__ee__")&&(o=this.__ee__[t]))if("object"==typeof o){for(n=arguments.length,i=new Array(n-1),e=1;e<n;++e)i[e-1]=arguments[e];for(o=o.slice(),e=0;r=o[e];++e)f.call(r,this,i)}else switch(arguments.length){case 1:p.call(o,this);break;case 2:p.call(o,this,arguments[1]);break;case 3:p.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),e=1;e<n;++e)i[e-1]=arguments[e];f.call(o,this,i)}}},c={on:l(r),once:l(o),off:l(i),emit:l(s)},u=y({},c),e.exports=n=function(t){return null==t?d(u):y(Object(t),c)},n.methods=a},{d:3,"es5-ext/object/valid-callable":15}],31:[function(t,e,n){e.exports=t("./lib/hypertimer")},{"./lib/hypertimer":34}],32:[function(t,e,n){e.exports="undefined"==typeof window||void 0===window.Promise?t("promise"):window.Promise},{promise:45}],33:[function(t,e,n){var r="undefined"!=typeof window?window.Debug:t("debug");e.exports=r||function(){return function(){}}},{debug:42}],34:[function(t,e,n){var r=t("event-emitter"),o=t("event-emitter/has-listeners"),i=t("./synchronization/master").createMaster,s=t("./synchronization/slave").createSlave,a=t("./util"),c={TIMEOUT:0,INTERVAL:1,TRIGGER:2};e.exports=function(t){var e=!0,n=1,u=!0,l=null,h=null,f=null,p=!1,d=null,m=a.systemNow(),y=[],v={},g=null,w=0,_=null,b=null,C=r({});function x(){return{paced:e,rate:n,deterministic:u,time:l,master:h,port:f}}function S(t,e){t.occurrence=Math.round((e-t.firstTime)/t.interval),t.time=t.firstTime+t.occurrence*t.interval}function j(t){if(y.length>0){for(var e=y.length-1;e>=0&&y[e].time>t.time;)e--;y.splice(e+1,0,t)}else y.push(t)}function O(t,e){function n(){t.type===c.INTERVAL&&v[t.id]&&(t.occurrence++,t.time=t.firstTime+t.occurrence*t.interval,j(t)),delete v[t.id],e&&e()}v[t.id]=t;try{0==t.callback.length?(t.callback(),n()):t.callback(n)}catch(t){o(C,"error")?C.emit("error",t):console.log("Error",t),n()}}function T(){if(e||!(Object.keys(v).length>0)){var t=y[0];if(g&&(clearTimeout(g),g=null),p&&t){var r=t.time,o=r-C.now(),i=e?o/n:0;g=setTimeout((function(){e||(m=r>m&&isFinite(r)?r:m);var t=function(t){for(var e=0;e<y.length&&(y[e].time<=t||!isFinite(y[e].time));)e++;var n=y.splice(0,e);return 0==u&&a.shuffle(n),n}(r);e?(t.forEach((function(t){O(t)})),T()):function e(){var n=t.shift();n?O(n,e):T()}()}),Math.round(i))}}}function E(t){var e="number"==typeof t?t:t instanceof Date?t.valueOf():new Date(t).valueOf();if(isNaN(e))throw new TypeError("Invalid date "+JSON.stringify(t)+". Date, number, or ISOString expected");return e}return C.config=function(t){return t&&(function(t){if(b||t.master)for(var e in t)if("master"!==e&&"slave"!==e)throw new Error('Cannot apply configuration option "'+e+'", timer is configured as slave.')}(t),function t(r){if("deterministic"in r&&(u=!!r.deterministic),"paced"in r&&(e=!!r.paced),"time"in r&&(m=E(r.time),d=a.systemNow(),function(t){for(var e=0;e<y.length;e++){var n=y[e];n.type===c.INTERVAL&&S(n,t)}}(m),l=new Date(m).toISOString()),"rate"in r){var o=Number(r.rate);if(isNaN(o)||o<=0)throw new TypeError("Invalid rate "+JSON.stringify(r.rate)+". Rate must be a positive number");m=C.now(),d=a.systemNow(),n=o}if("master"in r&&(b&&(b.destroy(),b=null),h=r.master,null!=r.master)){function p(e){var n=x();t(e);var r=x();C.emit("config",r,n)}(b=s(r.master)).on("change",(function(t){p({time:t})})),b.on("config",(function(t){p(t)})),b.on("error",(function(t){C.emit("error",t)}))}"port"in r&&(_&&(_.destroy(),_=null),f=r.port,r.port&&(_=i(C.now,C.config,r.port)).on("error",(function(t){C.emit("error",t)}))),T(),_&&_.broadcastConfig()}(t)),x()},C.now=function(){if(e){if(p){var t=a.systemNow()-d;return m+t*n}return m}return m},C.continue=function(){d=a.systemNow(),p=!0,T()},C.pause=function(){m=C.now(),d=null,p=!1,T()},C.getTime=function(){return new Date(C.now())},C.valueOf=C.getTime,C.toString=function(){return C.getTime().toString()},C.setTimeout=function(t,e){var n=w++,r=C.now()+e;if(isNaN(r))throw new TypeError("delay must be a number");return j({id:n,type:c.TIMEOUT,time:r,callback:t}),T(),n},C.setTrigger=function(t,e){var n=w++,r=E(e);return j({id:n,type:c.TRIGGER,time:r,callback:t}),T(),n},C.setInterval=function(t,e,n){var r=w++,o=Number(e);if(isNaN(o))throw new TypeError("interval must be a number");(o<0||!isFinite(o))&&(o=0);var i=null!=n?E(n):null,s=C.now(),a=null!=i?i:s+o,u={id:r,type:c.INTERVAL,interval:o,time:a,firstTime:null!=i?i:a,occurrence:0,callback:t};return a<s&&S(u,s),j(u),T(),r},C.clearTimeout=function(t){if(v[t])delete v[t];else for(var e=0;e<y.length;e++)if(y[e].id===t){y.splice(e,1),T();break}},C.clearTrigger=C.clearTimeout,C.clearInterval=C.clearTimeout,C.list=function(){return y.map((function(t){return t.id}))},C.clear=function(){v={},y=[],T()},C.destroy=function(){C.clear(),b&&b.destroy(),_&&_.destroy()},Object.defineProperty(C,"running",{get:function(){return p}}),C.config(t),C.continue(),C}},{"./synchronization/master":36,"./synchronization/slave":37,"./util":41,"event-emitter":30,"event-emitter/has-listeners":29}],35:[function(t,e,n){e.exports="undefined"==typeof window||void 0===window.WebSocket?t("ws"):window.WebSocket},{ws:62}],36:[function(t,e,n){var r=t("./WebSocket"),o=t("./socket-emitter"),i=t("../debug")("hypertimer:master");n.createMaster=function(t,e,n){var s=new r.Server({port:n});function a(){var t=e();return delete t.time,delete t.master,delete t.port,t}return s.on("connection",(function(e){i("new connection");var n=o(e);n.on("time",(function(e,n){var r=t();n(r),i("send time "+new Date(r).toISOString())}));var r=a();i("send config",r),n.send("config",r),e.emitter=n})),s.broadcast=function(t,e){i("broadcast",t,e),s.clients.forEach((function(n){n.emitter.send(t,e)}))},s.broadcastConfig=function(){s.broadcast("config",a())},s.destroy=function(){s.close(),i("destroyed")},i("listening at ws://localhost:"+n),s}},{"../debug":33,"./WebSocket":35,"./socket-emitter":38}],37:[function(t,e,n){var r=t("./WebSocket"),o=t("../Promise"),i=t("../debug")("hypertimer:slave"),s=t("./socket-emitter"),a=t("./stat"),c=t("./util"),u=1e3,l=5;n.createSlave=function(t){var e=new r(t),n=s(e),h=!0,f=!1,p=null;function d(){return c.repeat((function(){var t=null;return f?o.resolve(t):function(t){var e=Date.now();return t.request("time").then((function(n){var r=(Date.now()-e)/2,o=n+r;return h&&(h=!1,t.emit("change",o)),r}))}(n).then((function(e){t=e})).catch((function(t){console.log(t)})).then((function(){return c.wait(u)})).then((function(){return t}))}),l).then((function(t){i("latencies",t);var e=t.filter((function(t){return null!==t})),n=a.median(e)+a.std(e),r=e.filter((function(t){return t<n}));return r.length>0?a.mean(r):null})).then((function(t){return f?o.resolve(null):n.request("time").then((function(e){var r=e+t;return n.emit("change",r),r}))})).catch((function(t){n.emit("error",t)}))}return e.onopen=function(){i("connected"),d(),p=setInterval(d,36e5)},n.destroy=function(){f=!0,clearInterval(p),p=null,e.close(),i("destroyed")},n}},{"../Promise":32,"../debug":33,"./WebSocket":35,"./socket-emitter":38,"./stat":39,"./util":40}],38:[function(t,e,n){var r=t("event-emitter"),o=t("./../Promise"),i=t("../debug")("hypertimer:socket"),s=6e4;e.exports=function(t){var e=r({socket:t,send:function(e,n){var r={event:e,data:n};i("send",r),t.send(JSON.stringify(r))},request:function(e,r){return new o((function(o,c){var u=a++,l={event:e,id:u,data:r};n[u]={resolve:o,reject:c,timeout:setTimeout((function(){delete n[u],c(new Error("Timeout"))}),s)},i("request",l),t.send(JSON.stringify(l))})).catch((function(t){console.log("ERROR",t)}))}});t.onmessage=function(r){var o=r.data,s=JSON.parse(o);i("receive",s);var a=n[s.id];a?(clearTimeout(a.timeout),delete n[s.id],a.resolve(s.data)):"id"in s?e.emit(s.event,s.data,(function(e){var n={id:s.id,data:e};t.readyState===t.OPEN||t.readyState===t.CONNECTING?(i("reply",n),t.send(JSON.stringify(n))):i("cancel reply",n,"(socket is closed)")})):e.emit(s.event,s.data)};var n={},a=0;return e}},{"../debug":33,"./../Promise":32,"event-emitter":30}],39:[function(t,e,n){n.compare=function(t,e){return t>e?1:t<e?-1:0},n.add=function(t,e){return t+e},n.sum=function(t){return t.reduce(n.add)},n.mean=function(t){return n.sum(t)/t.length},n.std=function(t){return Math.sqrt(n.variance(t))},n.variance=function(t){if(t.length<2)return 0;var e=n.mean(t);return t.map((function(t){return Math.pow(t-e,2)})).reduce(n.add)/(t.length-1)},n.median=function(t){return t.length<2?t[0]:t.slice().sort(n.compare).length%2==0?(t[t.length/2-1]+t[t.length/2])/2:t[(t.length-1)/2]}},{}],40:[function(t,e,n){var r=t("../Promise");n.wait=function(t){return new r((function(e){setTimeout(e,t)}))},n.repeat=function(t,e){return new r((function(n,r){var o=0,i=[];!function r(){o<e?(o++,t().then((function(t){i.push(t),r()}))):n(i)}()}))},n.whilst=function(t,e){return new r((function(n,r){!function r(){t()?e().then((function(){r()})):n()}()}))}},{"../Promise":32}],41:[function(t,e,n){"function"==typeof Date.now?n.systemNow=function(){return Date.now()}:n.systemNow=function(){return(new Date).valueOf()},n.shuffle=function(t){for(var e,n,r=t.length;r;e=Math.floor(Math.random()*r),n=t[--r],t[r]=t[e],t[e]=n);return t}},{}],42:[function(t,e,n){(function(r){n.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},n.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))}),t.splice(o,0,n)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(t){}},n.load=function(){let t;try{t=n.storage.getItem("debug")}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=t("./common")(n);const{formatters:o}=e.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,t("_process"))},{"./common":43,_process:63}],43:[function(t,e,n){e.exports=function(e){function n(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){let e;function s(...t){if(!s.enabled)return;const n=s,o=Number(new Date),i=o-(e||o);n.diff=i,n.prev=e,n.curr=o,e=o,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(e,o)=>{if("%%"===e)return e;a++;const i=r.formatters[o];if("function"==typeof i){const r=t[a];e=i.call(n,r),t.splice(a,1),a--}return e}),r.formatArgs.call(n,t),(n.log||r.log).apply(n,t)}return s.namespace=t,s.enabled=r.enabled(t),s.useColors=r.useColors(),s.color=n(t),s.destroy=o,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function o(){const t=r.instances.indexOf(this);return-1!==t&&(r.instances.splice(t,1),!0)}function i(t,e){const n=r(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(t){return t instanceof Error?t.stack||t.message:t},r.disable=function(){const t=[...r.names.map(s),...r.skips.map(s).map(t=>"-"+t)].join(",");return r.enable(""),t},r.enable=function(t){let e;r.save(t),r.names=[],r.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(e=0;e<o;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")));for(e=0;e<r.instances.length;e++){const t=r.instances[e];t.enabled=r.enabled(t.namespace)}},r.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1},r.humanize=t("ms"),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=n,r.enable(r.load()),r}},{ms:44}],44:[function(t,e,n){var r=1e3,o=60*r,i=60*o,s=24*i,a=7*s,c=365.25*s;function u(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}e.exports=function(t,e){e=e||{};var n,l,h=typeof t;if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"weeks":case"week":case"w":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*i;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(t);if("number"===h&&isFinite(t))return e.long?(n=t,(l=Math.abs(n))>=s?u(n,l,s,"day"):l>=i?u(n,l,i,"hour"):l>=o?u(n,l,o,"minute"):l>=r?u(n,l,r,"second"):n+" ms"):function(t){var e=Math.abs(t);return e>=s?Math.round(t/s)+"d":e>=i?Math.round(t/i)+"h":e>=o?Math.round(t/o)+"m":e>=r?Math.round(t/r)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],45:[function(t,e,n){"use strict";e.exports=t("./lib")},{"./lib":50}],46:[function(t,e,n){"use strict";var r=t("asap/raw");function o(){}var i=null,s={};function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],t!==o&&p(t,this)}function c(t,e){for(;3===t._37;)t=t._12;0!==t._37?r((function(){var n=1===t._37?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return i=t,s}}(n,t._12);r===s?l(e.promise,i):u(e.promise,r)}else 1===t._37?u(e.promise,t._12):l(e.promise,t._12)})):t._59.push(e)}function u(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return i=t,s}}(e);if(n===s)return l(t,i);if(n===t.then&&e instanceof a)return t._37=3,t._12=e,void h(t);if("function"==typeof n)return void p(n.bind(e),t)}t._37=1,t._12=e,h(t)}function l(t,e){t._37=2,t._12=e,h(t)}function h(t){for(var e=0;e<t._59.length;e++)c(t,t._59[e]);t._59=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1,r=function(t,e,n){try{t(e,n)}catch(t){return i=t,s}}(t,(function(t){n||(n=!0,u(e,t))}),(function(t){n||(n=!0,l(e,t))}));n||r!==s||(n=!0,l(e,i))}e.exports=a,a._99=o,a.prototype.then=function(t,e){if(this.constructor!==a)return function(t,e,n){return new t.constructor((function(r,i){var s=new a(o);s.then(r,i),c(t,new f(e,n,s))}))}(this,t,e);var n=new a(o);return c(this,new f(t,e,n)),n}},{"asap/raw":2}],47:[function(t,e,n){"use strict";var r=t("./core.js");e.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,(function(t){setTimeout((function(){throw t}),0)}))}},{"./core.js":46}],48:[function(t,e,n){"use strict";var r=t("./core.js");e.exports=r;var o=l(!0),i=l(!1),s=l(null),a=l(void 0),c=l(0),u=l("");function l(t){var e=new r(r._99);return e._37=1,e._12=t,e}r.resolve=function(t){if(t instanceof r)return t;if(null===t)return s;if(void 0===t)return a;if(!0===t)return o;if(!1===t)return i;if(0===t)return c;if(""===t)return u;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(t){return new r((function(e,n){n(t)}))}return l(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r((function(t,n){if(0===e.length)return t([]);var o=e.length;function i(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof r&&a.then===r.prototype.then){for(;3===a._37;)a=a._12;return 1===a._37?i(s,a._12):(2===a._37&&n(a._12),void a.then((function(t){i(s,t)}),n))}var c=a.then;if("function"==typeof c)return void new r(c.bind(a)).then((function(t){i(s,t)}),n)}e[s]=a,0==--o&&t(e)}for(var s=0;s<e.length;s++)i(s,e[s])}))},r.reject=function(t){return new r((function(e,n){n(t)}))},r.race=function(t){return new r((function(e,n){t.forEach((function(t){r.resolve(t).then(e,n)}))}))},r.prototype.catch=function(t){return this.then(null,t)}},{"./core.js":46}],49:[function(t,e,n){"use strict";var r=t("./core.js");e.exports=r,r.prototype.finally=function(t){return this.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))}))}},{"./core.js":46}],50:[function(t,e,n){"use strict";e.exports=t("./core.js"),t("./done.js"),t("./finally.js"),t("./es6-extensions.js"),t("./node-extensions.js")},{"./core.js":46,"./done.js":47,"./es6-extensions.js":48,"./finally.js":49,"./node-extensions.js":51}],51:[function(t,e,n){"use strict";var r=t("./core.js"),o=t("asap");e.exports=r,r.denodeify=function(t,e){return e=e||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments,0,e>0?e:0);return new r((function(e,r){o.push((function(t,n){t?r(t):e(n)}));var i=t.apply(n,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||e(i)}))}},r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(t){if(null==n)return new r((function(e,n){n(t)}));o((function(){n.call(i,t)}))}}},r.prototype.nodeify=function(t,e){if("function"!=typeof t)return this;this.then((function(n){o((function(){t.call(e,null,n)}))}),(function(n){o((function(){t.call(e,n)}))}))}},{"./core.js":46,asap:1}],52:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{"./lib":57,dup:45}],53:[function(t,e,n){"use strict";var r=t("asap/raw");function o(){}var i=null,s={};function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,t!==o&&p(t,this)}function c(t,e){for(;3===t._81;)t=t._65;if(a._10&&a._10(t),0===t._81)return 0===t._45?(t._45=1,void(t._54=e)):1===t._45?(t._45=2,void(t._54=[t._54,e])):void t._54.push(e);!function(t,e){r((function(){var n=1===t._81?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return i=t,s}}(n,t._65);r===s?l(e.promise,i):u(e.promise,r)}else 1===t._81?u(e.promise,t._65):l(e.promise,t._65)}))}(t,e)}function u(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return i=t,s}}(e);if(n===s)return l(t,i);if(n===t.then&&e instanceof a)return t._81=3,t._65=e,void h(t);if("function"==typeof n)return void p(n.bind(e),t)}t._81=1,t._65=e,h(t)}function l(t,e){t._81=2,t._65=e,a._97&&a._97(t,e),h(t)}function h(t){if(1===t._45&&(c(t,t._54),t._54=null),2===t._45){for(var e=0;e<t._54.length;e++)c(t,t._54[e]);t._54=null}}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1,r=function(t,e,n){try{t(e,n)}catch(t){return i=t,s}}(t,(function(t){n||(n=!0,u(e,t))}),(function(t){n||(n=!0,l(e,t))}));n||r!==s||(n=!0,l(e,i))}e.exports=a,a._10=null,a._97=null,a._61=o,a.prototype.then=function(t,e){if(this.constructor!==a)return function(t,e,n){return new t.constructor((function(r,i){var s=new a(o);s.then(r,i),c(t,new f(e,n,s))}))}(this,t,e);var n=new a(o);return c(this,new f(t,e,n)),n}},{"asap/raw":2}],54:[function(t,e,n){arguments[4][47][0].apply(n,arguments)},{"./core.js":53,dup:47}],55:[function(t,e,n){"use strict";var r=t("./core.js");e.exports=r;var o=l(!0),i=l(!1),s=l(null),a=l(void 0),c=l(0),u=l("");function l(t){var e=new r(r._61);return e._81=1,e._65=t,e}r.resolve=function(t){if(t instanceof r)return t;if(null===t)return s;if(void 0===t)return a;if(!0===t)return o;if(!1===t)return i;if(0===t)return c;if(""===t)return u;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(t){return new r((function(e,n){n(t)}))}return l(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r((function(t,n){if(0===e.length)return t([]);var o=e.length;function i(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof r&&a.then===r.prototype.then){for(;3===a._81;)a=a._65;return 1===a._81?i(s,a._65):(2===a._81&&n(a._65),void a.then((function(t){i(s,t)}),n))}var c=a.then;if("function"==typeof c)return void new r(c.bind(a)).then((function(t){i(s,t)}),n)}e[s]=a,0==--o&&t(e)}for(var s=0;s<e.length;s++)i(s,e[s])}))},r.reject=function(t){return new r((function(e,n){n(t)}))},r.race=function(t){return new r((function(e,n){t.forEach((function(t){r.resolve(t).then(e,n)}))}))},r.prototype.catch=function(t){return this.then(null,t)}},{"./core.js":53}],56:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{"./core.js":53,dup:49}],57:[function(t,e,n){"use strict";e.exports=t("./core.js"),t("./done.js"),t("./finally.js"),t("./es6-extensions.js"),t("./node-extensions.js"),t("./synchronous.js")},{"./core.js":53,"./done.js":54,"./es6-extensions.js":55,"./finally.js":56,"./node-extensions.js":58,"./synchronous.js":59}],58:[function(t,e,n){"use strict";var r=t("./core.js"),o=t("asap");e.exports=r,r.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?function(t,e){for(var n=[],o=0;o<e;o++)n.push("a"+o);var s=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([i]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],s)(r,t)}(t,e):function(t){for(var e=Math.max(t.length-1,3),n=[],o=0;o<e;o++)n.push("a"+o);var s=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+i+";","var res;","switch (argLength) {",n.concat(["extra"]).map((function(t,e){return"case "+e+":res = fn.call("+["self"].concat(n.slice(0,e)).concat("cb").join(",")+");break;"})).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],s)(r,t)}(t)};var i="function (err, res) {if (err) { rj(err); } else { rs(res); }}";r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(t){if(null==n)return new r((function(e,n){n(t)}));o((function(){n.call(i,t)}))}}},r.prototype.nodeify=function(t,e){if("function"!=typeof t)return this;this.then((function(n){o((function(){t.call(e,null,n)}))}),(function(n){o((function(){t.call(e,n)}))}))}},{"./core.js":53,asap:1}],59:[function(t,e,n){"use strict";var r=t("./core.js");e.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},r.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},r.prototype.getState=function(){return 3===this._81?this._65.getState():-1===this._81||-2===this._81?0:this._81}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},{"./core.js":53}],60:[function(t,n,r){(function(t){"use strict";var e=256,r=[],o=void 0===t?window:t,i=Math.pow(e,6),s=Math.pow(2,52),a=2*s,c=e-1,u=Math.random;function l(t){var n,r=t.length,o=this,i=0,s=o.i=o.j=0,a=o.S=[];for(r||(t=[r++]);i<e;)a[i]=i++;for(i=0;i<e;i++)a[i]=a[s=c&s+t[i%r]+(n=a[i])],a[s]=n;(o.g=function(t){for(var n,r=0,i=o.i,s=o.j,a=o.S;t--;)n=a[i=c&i+1],r=r*e+a[c&(a[i]=a[s=c&s+n])+(a[s]=n)];return o.i=i,o.j=s,r})(e)}function h(t,e){var n,r=[],o=(typeof t)[0];if(e&&"o"==o)for(n in t)try{r.push(h(t[n],e-1))}catch(t){}return r.length?r:"s"==o?t:t+"\0"}function f(t,e){for(var n,r=t+"",o=0;o<r.length;)e[c&o]=c&(n^=19*e[c&o])+r.charCodeAt(o++);return d(e)}function p(t){try{return o.crypto.getRandomValues(t=new Uint8Array(e)),d(t)}catch(t){return[+new Date,o,o.navigator&&o.navigator.plugins,o.screen,d(r)]}}function d(t){return String.fromCharCode.apply(0,t)}n.exports=function(t,o){if(o&&!0===o.global)return o.global=!1,Math.random=n.exports(t,o),o.global=!0,Math.random;var c=o&&o.entropy||!1,u=[],m=(f(h(c?[t,d(r)]:0 in arguments?t:p(),3),u),new l(u));return f(d(m.S),r),function(){for(var t=m.g(6),n=i,r=0;t<s;)t=(t+r)*e,n*=e,r=m.g(1);for(;t>=a;)t/=2,n/=2,r>>>=1;return(t+r)/n}},n.exports.resetGlobal=function(){Math.random=u},f(Math.random(),r)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],61:[function(t,e,n){n=e.exports=function(){for(var t,e="",r=0;r<32;r++)t=16*n.random()|0,r>4&&r<21&&!(r%4)&&(e+="-"),e+=(12===r?4:16===r?3&t|8:t).toString(16);return e};var r=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;n.isUUID=function(t){return r.test(t)},n.random=function(){return Math.random()}},{}],62:[function(t,e,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],63:[function(t,e,n){var r,o,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var u,l=[],h=!1,f=-1;function p(){h&&u&&(h=!1,u.length?l=u.concat(l):f=-1,l.length&&d())}function d(){if(!h){var t=c(p);h=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,h=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new m(t,e)),1!==l.length||h||c(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],64:[function(t,n,r){(function(t){!function(e){var o="object"==typeof r&&r&&!r.nodeType&&r,i="object"==typeof n&&n&&!n.nodeType&&n,s="object"==typeof t&&t;s.global!==s&&s.window!==s&&s.self!==s||(e=s);var a,c,u=2147483647,l=36,h=1,f=26,p=38,d=700,m=72,y=128,v="-",g=/^xn--/,w=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-h,x=Math.floor,S=String.fromCharCode;function j(t){throw new RangeError(b[t])}function O(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function T(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+O((t=t.replace(_,".")).split("."),e).join(".")}function E(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function A(t){return O(t,(function(t){var e="";return t>65535&&(e+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=S(t)})).join("")}function N(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function P(t,e,n){var r=0;for(t=n?x(t/d):t>>1,t+=x(t/e);t>C*f>>1;r+=l)t=x(t/C);return x(r+(C+1)*t/(t+p))}function F(t){var e,n,r,o,i,s,a,c,p,d,g,w=[],_=t.length,b=0,C=y,S=m;for((n=t.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&j("not-basic"),w.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<_;){for(i=b,s=1,a=l;o>=_&&j("invalid-input"),((c=(g=t.charCodeAt(o++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:l)>=l||c>x((u-b)/s))&&j("overflow"),b+=c*s,!(c<(p=a<=S?h:a>=S+f?f:a-S));a+=l)s>x(u/(d=l-p))&&j("overflow"),s*=d;S=P(b-i,e=w.length+1,0==i),x(b/e)>u-C&&j("overflow"),C+=x(b/e),b%=e,w.splice(b++,0,C)}return A(w)}function k(t){var e,n,r,o,i,s,a,c,p,d,g,w,_,b,C,O=[];for(w=(t=E(t)).length,e=y,n=0,i=m,s=0;s<w;++s)(g=t[s])<128&&O.push(S(g));for(r=o=O.length,o&&O.push(v);r<w;){for(a=u,s=0;s<w;++s)(g=t[s])>=e&&g<a&&(a=g);for(a-e>x((u-n)/(_=r+1))&&j("overflow"),n+=(a-e)*_,e=a,s=0;s<w;++s)if((g=t[s])<e&&++n>u&&j("overflow"),g==e){for(c=n,p=l;!(c<(d=p<=i?h:p>=i+f?f:p-i));p+=l)C=c-d,b=l-d,O.push(S(N(d+C%b,0))),c=x(C/b);O.push(S(N(c,0))),i=P(n,_,r==o),n=0,++r}++n,++e}return O.join("")}if(a={version:"1.4.1",ucs2:{decode:E,encode:A},decode:F,encode:k,toASCII:function(t){return T(t,(function(t){return w.test(t)?"xn--"+k(t):t}))},toUnicode:function(t){return T(t,(function(t){return g.test(t)?F(t.slice(4).toLowerCase()):t}))}},o&&i)if(n.exports==o)i.exports=a;else for(c in a)a.hasOwnProperty(c)&&(o[c]=a[c]);else e.punycode=a}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,i){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var h,f,p,d,m=t[l].replace(a,"%20"),y=m.indexOf(n);y>=0?(h=m.substr(0,y),f=m.substr(y+1)):(h=m,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(s,p)?o(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],66:[function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?i(s(t),(function(s){var a=encodeURIComponent(r(s))+n;return o(t[s])?i(t[s],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[s]))})).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],67:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":65,"./encode":66}],68:[function(t,e,n){"use strict";var r=t("punycode"),o=t("./util");function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=w,n.resolve=function(t,e){return w(t,!1,!0).resolve(e)},n.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},n.format=function(t){return o.isString(t)&&(t=w(t)),t instanceof i?t.format():i.prototype.format.call(t)},n.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),h=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=t("querystring");function w(t,e,n){if(t&&o.isObject(t)&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}i.prototype.parse=function(t,e,n){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),a=-1!==i&&i<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var w=t=u.join(a);if(w=w.trim(),!n&&1===t.split("#").length){var _=c.exec(w);if(_)return this.path=w,this.href=w,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=s.exec(w);if(b){var C=(b=b[0]).toLowerCase();this.protocol=C,w=w.substr(b.length)}if(n||b||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===w.substr(0,2);!x||b&&y[b]||(w=w.substr(2),this.slashes=!0)}if(!y[b]&&(x||b&&!v[b])){for(var S,j,O=-1,T=0;T<f.length;T++)-1!==(E=w.indexOf(f[T]))&&(-1===O||E<O)&&(O=E);for(-1!==(j=-1===O?w.lastIndexOf("@"):w.lastIndexOf("@",O))&&(S=w.slice(0,j),w=w.slice(j+1),this.auth=decodeURIComponent(S)),O=-1,T=0;T<h.length;T++){var E;-1!==(E=w.indexOf(h[T]))&&(-1===O||E<O)&&(O=E)}-1===O&&(O=w.length),this.host=w.slice(0,O),w=w.slice(O),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var N=this.hostname.split(/\./),P=(T=0,N.length);T<P;T++){var F=N[T];if(F&&!F.match(p)){for(var k="",M=0,I=F.length;M<I;M++)F.charCodeAt(M)>127?k+="x":k+=F[M];if(!k.match(p)){var R=N.slice(0,T),U=N.slice(T+1),V=F.match(d);V&&(R.push(V[1]),U.unshift(V[2])),U.length&&(w="/"+U.join(".")+w),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var q=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+q,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!m[C])for(T=0,P=l.length;T<P;T++){var z=l[T];if(-1!==w.indexOf(z)){var $=encodeURIComponent(z);$===z&&($=escape(z)),w=w.split(z).join($)}}var B=w.indexOf("#");-1!==B&&(this.hash=w.substr(B),w=w.slice(0,B));var D=w.indexOf("?");if(-1!==D?(this.search=w.substr(D),this.query=w.substr(D+1),e&&(this.query=g.parse(this.query)),w=w.slice(0,D)):e&&(this.search="",this.query={}),w&&(this.pathname=w),v[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var W=this.search||"";this.path=q+W}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=g.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},i.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(o.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=t[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var w=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=_||w||n.host&&t.pathname,C=b,x=n.pathname&&n.pathname.split("/")||[],S=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===x[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),n.search=t.search,n.query=t.query;else if(!o.isNullOrUndefined(t.search))return S&&(n.hostname=n.host=x.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),n.search=t.search,n.query=t.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var j=x.slice(-1)[0],O=(n.host||t.host||x.length>1)&&("."===j||".."===j)||""===j,T=0,E=x.length;E>=0;E--)"."===(j=x[E])?x.splice(E,1):".."===j?(x.splice(E,1),T++):T&&(x.splice(E,1),T--);if(!b&&!C)for(;T--;T)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),O&&"/"!==x.join("/").substr(-1)&&x.push("");var A,N=""===x[0]||x[0]&&"/"===x[0].charAt(0);return S&&(n.hostname=n.host=N?"":x.length?x.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),(b=b||n.host&&x.length)&&!N&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":69,punycode:64,querystring:67}],69:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}]},{},[20])(20)}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const r=new WeakMap,o=t=>"function"==typeof t&&r.has(t),i=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,s=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},a={},c={},u=`{{lit-${String(Math.random()).slice(2)}}}`,l=`\x3c!--${u}--\x3e`,h=new RegExp(`${u}|${l}`),f="$lit$";class p{constructor(t,e){this.parts=[],this.element=e;const n=[],r=[],o=document.createTreeWalker(e.content,133,null,!1);let i=0,s=-1,a=0;const{strings:c,values:{length:l}}=t;for(;a<l;){const t=o.nextNode();if(null!==t){if(s++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let r=0;for(let t=0;t<n;t++)d(e[t].name,f)&&r++;for(;r-- >0;){const e=c[a],n=v.exec(e)[2],r=n.toLowerCase()+f,o=t.getAttribute(r);t.removeAttribute(r);const i=o.split(h);this.parts.push({type:"attribute",index:s,name:n,strings:i}),a+=i.length-1}}"TEMPLATE"===t.tagName&&(r.push(t),o.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(u)>=0){const r=t.parentNode,o=e.split(h),i=o.length-1;for(let e=0;e<i;e++){let n,i=o[e];if(""===i)n=y();else{const t=v.exec(i);null!==t&&d(t[2],f)&&(i=i.slice(0,t.index)+t[1]+t[2].slice(0,-f.length)+t[3]),n=document.createTextNode(i)}r.insertBefore(n,t),this.parts.push({type:"node",index:++s})}""===o[i]?(r.insertBefore(y(),t),n.push(t)):t.data=o[i],a+=i}}else if(8===t.nodeType)if(t.data===u){const e=t.parentNode;null!==t.previousSibling&&s!==i||(s++,e.insertBefore(y(),t)),i=s,this.parts.push({type:"node",index:s}),null===t.nextSibling?t.data="":(n.push(t),s--),a++}else{let e=-1;for(;-1!==(e=t.data.indexOf(u,e+1));)this.parts.push({type:"node",index:-1}),a++}}else o.currentNode=r.pop()}for(const t of n)t.parentNode.removeChild(t)}}const d=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},m=t=>-1!==t.index,y=()=>document.createComment(""),v=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class g{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=i?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],n=this.template.parts,r=document.createTreeWalker(t,133,null,!1);let o,s=0,a=0,c=r.nextNode();for(;s<n.length;)if(o=n[s],m(o)){for(;a<o.index;)a++,"TEMPLATE"===c.nodeName&&(e.push(c),r.currentNode=c.content),null===(c=r.nextNode())&&(r.currentNode=e.pop(),c=r.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(c.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,o.name,o.strings,this.options));s++}else this.__parts.push(void 0),s++;return i&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const w=` ${u} `;class _{constructor(t,e,n,r){this.strings=t,this.values=e,this.type=n,this.processor=r}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let r=0;r<t;r++){const t=this.strings[r],o=t.lastIndexOf("\x3c!--");n=(o>-1||n)&&-1===t.indexOf("--\x3e",o+1);const i=v.exec(t);e+=null===i?t+(n?w:l):t.substr(0,i.index)+i[1]+i[2]+f+i[3]+u}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const b=t=>null===t||!("object"==typeof t||"function"==typeof t),C=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class x{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new S(this)}_getValue(){const t=this.strings,e=t.length-1;let n="";for(let r=0;r<e;r++){n+=t[r];const e=this.parts[r];if(void 0!==e){const t=e.value;if(b(t)||!C(t))n+="string"==typeof t?t:String(t);else for(const e of t)n+="string"==typeof e?e:String(e)}}return n+=t[e],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class S{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===a||b(t)&&t===this.value||(this.value=t,o(t)||(this.committer.dirty=!0))}commit(){for(;o(this.value);){const t=this.value;this.value=a,t(this)}this.value!==a&&this.committer.commit()}}class j{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(y()),this.endNode=t.appendChild(y())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=y()),t.__insert(this.endNode=y())}insertAfterPart(t){t.__insert(this.startNode=y()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){for(;o(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a,t(this)}const t=this.__pendingValue;t!==a&&(b(t)?t!==this.value&&this.__commitText(t):t instanceof _?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):C(t)?this.__commitIterable(t):t===c?(this.value=c,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof g&&this.value.template===e)this.value.update(t.values);else{const n=new g(e,t.processor,this.options),r=n._clone();n.update(t.values),this.__commitNode(r),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,r=0;for(const o of t)n=e[r],void 0===n&&(n=new j(this.options),e.push(n),0===r?n.appendIntoPart(this):n.insertAfterPart(e[r-1])),n.setValue(o),n.commit(),r++;r<e.length&&(e.length=r,this.clear(n&&n.endNode))}clear(t=this.startNode){s(this.startNode.parentNode,t.nextSibling,this.endNode)}}class O{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;o(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a,t(this)}if(this.__pendingValue===a)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=a}}class T extends x{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new E(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class E extends S{}let A=!1;try{const t={get capture(){return A=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}class N{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;o(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a,t(this)}if(this.__pendingValue===a)return;const t=this.__pendingValue,e=this.value,n=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),r=null!=t&&(null==e||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=P(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=a}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const P=t=>t&&(A?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const F=new class{handleAttributeExpressions(t,e,n,r){const o=e[0];if("."===o){return new T(t,e.slice(1),n).parts}return"@"===o?[new N(t,e.slice(1),r.eventContext)]:"?"===o?[new O(t,e.slice(1),n)]:new x(t,e,n).parts}handleTextExpression(t){return new j(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function k(t){let e=M.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},M.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const r=t.strings.join(u);return n=e.keyString.get(r),void 0===n&&(n=new p(t,t.getTemplateElement()),e.keyString.set(r,n)),e.stringsArray.set(t.strings,n),n}const M=new Map,I=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");const R=(t,...e)=>new _(t,e,"html",F),U=133;function V(t,e){const{element:{content:n},parts:r}=t,o=document.createTreeWalker(n,U,null,!1);let i=L(r),s=r[i],a=-1,c=0;const u=[];let l=null;for(;o.nextNode();){a++;const t=o.currentNode;for(t.previousSibling===l&&(l=null),e.has(t)&&(u.push(t),null===l&&(l=t)),null!==l&&c++;void 0!==s&&s.index===a;)s.index=null!==l?-1:s.index-c,i=L(r,i),s=r[i]}u.forEach(t=>t.parentNode.removeChild(t))}const q=t=>{let e=11===t.nodeType?0:1;const n=document.createTreeWalker(t,U,null,!1);for(;n.nextNode();)e++;return e},L=(t,e=-1)=>{for(let n=e+1;n<t.length;n++){const e=t[n];if(m(e))return n}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const z=(t,e)=>`${t}--${e}`;let $=!0;void 0===window.ShadyCSS?$=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),$=!1);const B=t=>e=>{const n=z(e.type,t);let r=M.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},M.set(n,r));let o=r.stringsArray.get(e.strings);if(void 0!==o)return o;const i=e.strings.join(u);if(o=r.keyString.get(i),void 0===o){const n=e.getTemplateElement();$&&window.ShadyCSS.prepareTemplateDom(n,t),o=new p(e,n),r.keyString.set(i,o)}return r.stringsArray.set(e.strings,o),o},D=["html","svg"],W=new Set,J=(t,e,n)=>{W.add(t);const r=n?n.element:document.createElement("template"),o=e.querySelectorAll("style"),{length:i}=o;if(0===i)return void window.ShadyCSS.prepareTemplateStyles(r,t);const s=document.createElement("style");for(let t=0;t<i;t++){const e=o[t];e.parentNode.removeChild(e),s.textContent+=e.textContent}(t=>{D.forEach(e=>{const n=M.get(z(e,t));void 0!==n&&n.keyString.forEach(t=>{const{element:{content:e}}=t,n=new Set;Array.from(e.querySelectorAll("style")).forEach(t=>{n.add(t)}),V(t,n)})})})(t);const a=r.content;n?function(t,e,n=null){const{element:{content:r},parts:o}=t;if(null==n)return void r.appendChild(e);const i=document.createTreeWalker(r,U,null,!1);let s=L(o),a=0,c=-1;for(;i.nextNode();){for(c++,i.currentNode===n&&(a=q(e),n.parentNode.insertBefore(e,n));-1!==s&&o[s].index===c;){if(a>0){for(;-1!==s;)o[s].index+=a,s=L(o,s);return}s=L(o,s)}}}(n,s,a.firstChild):a.insertBefore(s,a.firstChild),window.ShadyCSS.prepareTemplateStyles(r,t);const c=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)e.insertBefore(c.cloneNode(!0),e.firstChild);else if(n){a.insertBefore(s,a.firstChild);const t=new Set;t.add(s),V(n,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const H={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},G=(t,e)=>e!==t&&(e==e||t==t),Z={attribute:!0,type:String,converter:H,reflect:!1,hasChanged:G},K=Promise.resolve(!0),Q=1,X=4,Y=8,tt=16,et=32,nt="finalized";class rt extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=K,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,n)=>{const r=this._attributeNameForProperty(n,e);void 0!==r&&(this._attributeToPropertyMap.set(r,n),t.push(r))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=Z){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const n="symbol"==typeof t?Symbol():`__${t}`;Object.defineProperty(this.prototype,t,{get(){return this[n]},set(e){const r=this[t];this[n]=e,this._requestUpdate(t,r)},configurable:!0,enumerable:!0})}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(nt)||t.finalize(),this[nt]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const n of e)this.createProperty(n,t[n])}}static _attributeNameForProperty(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,n=G){return n(t,e)}static _propertyValueFromAttribute(t,e){const n=e.type,r=e.converter||H,o="function"==typeof r?r:r.fromAttribute;return o?o(t,n):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const n=e.type,r=e.converter;return(r&&r.toAttribute||H.toAttribute)(t,n)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this._updateState=this._updateState|et,this._hasConnectedResolver&&(this._hasConnectedResolver(),this._hasConnectedResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,n){e!==n&&this._attributeToProperty(t,n)}_propertyToAttribute(t,e,n=Z){const r=this.constructor,o=r._attributeNameForProperty(t,n);if(void 0!==o){const t=r._propertyValueToAttribute(e,n);if(void 0===t)return;this._updateState=this._updateState|Y,null==t?this.removeAttribute(o):this.setAttribute(o,t),this._updateState=this._updateState&~Y}}_attributeToProperty(t,e){if(this._updateState&Y)return;const n=this.constructor,r=n._attributeToPropertyMap.get(t);if(void 0!==r){const t=n._classProperties.get(r)||Z;this._updateState=this._updateState|tt,this[r]=n._propertyValueFromAttribute(e,t),this._updateState=this._updateState&~tt}}_requestUpdate(t,e){let n=!0;if(void 0!==t){const r=this.constructor,o=r._classProperties.get(t)||Z;r._valueHasChanged(this[t],e,o.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==o.reflect||this._updateState&tt||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,o))):n=!1}!this._hasRequestedUpdate&&n&&this._enqueueUpdate()}requestUpdate(t,e){return this._requestUpdate(t,e),this.updateComplete}async _enqueueUpdate(){let t,e;this._updateState=this._updateState|X;const n=this._updatePromise;this._updatePromise=new Promise((n,r)=>{t=n,e=r});try{await n}catch(t){}this._hasConnected||await new Promise(t=>this._hasConnectedResolver=t);try{const t=this.performUpdate();null!=t&&await t}catch(t){e(t)}t(!this._hasRequestedUpdate)}get _hasConnected(){return this._updateState&et}get _hasRequestedUpdate(){return this._updateState&X}get hasUpdated(){return this._updateState&Q}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t&&this.update(e)}catch(e){throw t=!1,e}finally{this._markUpdated()}t&&(this._updateState&Q||(this._updateState=this._updateState|Q,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~X}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,e)=>this._propertyToAttribute(e,this[e],t)),this._reflectingProperties=void 0)}updated(t){}firstUpdated(t){}}rt[nt]=!0;const ot="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;Symbol();
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.2.1");const it=t=>t.flat?t.flat(1/0):function t(e,n=[]){for(let r=0,o=e.length;r<o;r++){const o=e[r];Array.isArray(o)?t(o,n):n.push(o)}return n}(t);class st extends rt{static finalize(){super.finalize.call(this),this._styles=this.hasOwnProperty(JSCompiler_renameProperty("styles",this))?this._getUniqueStyles():this._styles||[]}static _getUniqueStyles(){const t=this.styles,e=[];if(Array.isArray(t)){it(t).reduceRight((t,e)=>(t.add(e),t),new Set).forEach(t=>e.unshift(t))}else t&&e.push(t);return e}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?ot?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){super.update(t);const e=this.render();e instanceof _&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)}))}render(){}}st.finalized=!0,st.render=(t,e,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const r=n.scopeName,o=I.has(e),i=$&&11===e.nodeType&&!!e.host,a=i&&!W.has(r),c=a?document.createDocumentFragment():e;if(((t,e,n)=>{let r=I.get(e);void 0===r&&(s(e,e.firstChild),I.set(e,r=new j(Object.assign({templateFactory:k},n))),r.appendInto(e)),r.setValue(t),r.commit()})(t,c,Object.assign({templateFactory:B(r)},n)),a){const t=I.get(c);I.delete(c);const n=t.value instanceof g?t.value.template:void 0;J(r,c,n),s(e,e.firstChild),e.appendChild(c),I.set(e,t)}!o&&i&&window.ShadyCSS.styleElement(e.host)};var at=n(0),ct=n.n(at);function ut(t){ct.a.Agent.call(this,t),this.connect(ct.a.system.transports.getAll())}ut.prototype=Object.create(ct.a.Agent.prototype),ut.prototype.constructor=ut,ut.prototype.sayHello=function(t){this.send(t,"Hello "+t+"!")},ut.prototype.receive=function(t,e){console.log(this.id+" received from :"+t+" this message: "+JSON.stringify(e)),0===JSON.stringify(e).indexOf("Hello")&&this.send(t,"Hi "+t+", nice to meet you!")};customElements.define("app-element",class extends st{static get properties(){return{name:{type:String},count:{type:Number}}}constructor(){super(),this.count=0}render(){return R`
    <p>${this.name}</p>
    <button @click="${this.sendMessage}">Send message</button>
    `}firstUpdated(){var t=this;this.agent=new ut(this.name),this.agent.receive=function(e,n){if(n.hasOwnProperty("action"))switch(n.action){case"doSomething":t.doSomething(n);break;default:console.log("Unknown action ",n)}}}doSomething(t){console.log(t)}sendMessage(){this.count++,this.agent.send("Messages",{action:"info",info:"Now counter is "+this.count})}});customElements.define("messages-element",class extends st{static get properties(){return{name:{type:String},messages:{type:Array}}}constructor(){super(),this.name="unknown",this.messages=[]}render(){return R`
    <!-- template content -->
    <p>${this.name}</p>

    <pre class="pre-scrollable">
    <ul id="messageslist">
    ${this.messages.map(t=>R`<li><b>Agent ${t.from}</b> say "${t.message}"</li>`)}
    </ul>
    </pre>
    `}firstUpdated(){var t=this;this.agent=new ut(this.name),this.agent.receive=function(e,n){if(n.hasOwnProperty("action"))switch(n.action){case"info":t.addInfo(e,n);break;default:console.log("Unknown action ",n)}}}addInfo(t,e){this.messages.reverse(),this.messages=[...this.messages,{message:JSON.stringify(e),from:t}],this.messages.reverse()}});customElements.define("main-element",class extends st{render(){return R`
    <app-element name="App"></app-element>
    <messages-element name="Messages"></messages-element>
    `}})}]);